<!doctype html><html lang="en"><head><title>XR Spinosaurus</title><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width,initial-scale=1"/><style>body{font-family:helvetica,arial,sans-serif;margin:2em}h1{font-size:1.35em}div#text{position:absolute;left:6px;top:6px;padding:6px;max-width:350px;background-color:rgba(255,255,255,.7)}</style><script>"http:"==window.location.protocol&&"localhost"!=window.location.hostname&&"127.0.0.1"!=window.location.hostname&&window.location.hostname</script><script src="https://rawgit.com/aframevr/aframe/master/dist/aframe-master.min.js"></script><script src="https://unpkg.com/aframe-extras@3.3.0/dist/aframe-extras.min.js"></script><script src="https://unpkg.com/aframe-environment-component@1.1.0/dist/aframe-environment-component.min.js"></script><script>AFRAME.registerComponent("hide-in-ar-mode",{init:function(){this.el.sceneEl.addEventListener("enter-vr",(e=>{this.wasVisible=this.el.getAttribute("visible"),this.el.sceneEl.is("ar-mode")&&this.el.setAttribute("visible",!1)})),this.el.sceneEl.addEventListener("exit-vr",(e=>{this.wasVisible&&this.el.setAttribute("visible",!0)}))}}),AFRAME.registerComponent("ar-shadows",{schema:{opacity:{default:.3}},init:function(){this.el.sceneEl.addEventListener("enter-vr",(e=>{this.wasVisible=this.el.getAttribute("visible"),this.el.sceneEl.is("ar-mode")&&(this.savedMaterial=this.el.object3D.children[0].material,this.el.object3D.children[0].material=new THREE.ShadowMaterial,this.el.object3D.children[0].material.opacity=this.data.opacity,this.el.setAttribute("visible",!0))})),this.el.sceneEl.addEventListener("exit-vr",(e=>{this.savedMaterial&&(this.el.object3D.children[0].material=this.savedMaterial,this.savedMaterial=null),this.wasVisible||this.el.setAttribute("visible",!1)}))}}),AFRAME.registerComponent("ar-hit-test",{init:function(){this.xrHitTestSource=null,this.viewerSpace=null,this.refSpace=null,this.el.sceneEl.renderer.xr.addEventListener("sessionend",(e=>{this.viewerSpace=null,this.refSpace=null,this.xrHitTestSource=null})),this.el.sceneEl.renderer.xr.addEventListener("sessionstart",(e=>{let t=this.el.sceneEl.renderer.xr.getSession(),i=this.el;t.addEventListener("select",(function(){let e=i.getAttribute("position");document.getElementById("dino").setAttribute("position",e),document.getElementById("light").setAttribute("position",{x:e.x-2,y:e.y+4,z:e.z+2})})),t.requestReferenceSpace("viewer").then((e=>{this.viewerSpace=e,t.requestHitTestSource({space:this.viewerSpace}).then((e=>{this.xrHitTestSource=e}))})),t.requestReferenceSpace("local-floor").then((e=>{this.refSpace=e}))}))},tick:function(){if(this.el.sceneEl.is("ar-mode")){if(!this.viewerSpace)return;let e=this.el.sceneEl.frame,t=e.getViewerPose(this.refSpace);if(this.xrHitTestSource&&t){let t=e.getHitTestResults(this.xrHitTestSource);if(t.length>0){let e=t[0].getPose(this.refSpace),i=new THREE.Matrix4;i.fromArray(e.transform.matrix);let s=new THREE.Vector3;s.setFromMatrixPosition(i),this.el.setAttribute("position",s)}}}}})</script><link href="./css/vendor.e0cf10725f0927a5c889.css" rel="stylesheet"><link href="./css/index.9d329cad156494a55860.css" rel="stylesheet"></head><body><a-scene webxr="requiredFeatures: hit-test,local-floor;"><a-assets><a-asset-item id="spinosaurus" src="./gltf/rocket.glb" response-type="arraybuffer"></a-asset-item><a-asset-item id="reticle" src="./gltf/reticle.gltf" response-type="arraybuffer"></a-asset-item></a-assets><a-camera position="0 1.2 0"></a-camera><a-entity environment="preset: forest; lighting: none; shadow: none; lightPosition: 0 2.15 0" hide-in-ar-mode></a-entity><a-entity id="dino" position="-1 0 -3" scale="0.5 0.5 0.5"><a-entity position="1.8 2.15 0" rotation="0 55 0" gltf-model="#spinosaurus" animation-mixer shadow="cast: true; receive: false"></a-entity><a-plane height="30" width="30" rotation="-90 0 0" shadow="receive: true" ar-shadows="opacity: 0.2" visible="false"></a-plane></a-entity><a-entity light="type: hemisphere; intensity: 1"></a-entity><a-light type="directional" light="castShadow: true;
                      shadowMapHeight: 1024;
                      shadowMapWidth: 1024;
                      shadowCameraLeft: -7;
                      shadowCameraRight: 5;
                      shadowCameraBottom: -5;
                      shadowCameraTop: 5;" id="light" target="dino" position="-2 4 2"></a-light><a-entity gltf-model="#reticle" scale="0.8 0.8 0.8" ar-hit-test></a-entity></a-scene><div id="text"><h1>A-Frame Spinosaurus for VR/AR</h1><p>Model: <a href="https://sketchfab.com/3d-models/spinosaurus-2135501583704537907645bf723685e7">Spinosaurus</a> by <a href="https://sketchfab.com/VapTor">Vaptor-Studio</a>.</p><p>Size: <button id="btn_full">Full</button> <button id="btn_half">1/2</button> <button id="btn_quarter">1/16</button></p><p>Try the WebXR's AR mode with an Android phone and Chrome (Beta) v81+.</p></div><script>function setSize(e){document.getElementById("dino").setAttribute("scale",{x:e,y:e,z:e})}document.getElementById("btn_full").onclick=setSize.bind(this,1),document.getElementById("btn_half").onclick=setSize.bind(this,.5),document.getElementById("btn_quarter").onclick=setSize.bind(this,.0625)</script><script defer="defer" src="./js/index.9d329cad156494a55860.js"></script></body></html>